{% comment %}
  Estelle Atelier - Breadcrumbs Snippet
  Based on Shopify Dawn theme breadcrumbs component
  Uses CSS variables from theme settings

  Usage:
    {% render 'breadcrumbs' %}
{% endcomment %}

{%- unless template == 'index' or template == 'cart' or template == 'list-collections' -%}
  <nav class="breadcrumbs" role="navigation" aria-label="Breadcrumb" data-breadcrumbs>
    <a href="{{ routes.root_url }}" class="breadcrumbs__link link">
      {% render 'icon-svg', icon: 'home', size: '16', class: 'breadcrumbs__home-icon' %}
      <span class="visually-hidden">{{ 'general.breadcrumbs.home' | t }}</span>
    </a>

    {%- if template contains 'product' -%}
      {%- if collection -%}
        <span class="breadcrumbs__separator" aria-hidden="true">/</span>
        {{ collection.title | link_to: collection.url }}
      {%- elsif product.collections.size > 0 -%}
        <span class="breadcrumbs__separator" aria-hidden="true">/</span>
        {{ product.collections.first.title | link_to: product.collections.first.url }}
      {%- endif -%}
      <span class="breadcrumbs__separator" aria-hidden="true">/</span>
      <span class="breadcrumbs__item breadcrumbs__item--current" aria-current="page">{{ product.title }}</span>

    {%- elsif template contains 'collection' and collection.handle -%}
      <span class="breadcrumbs__separator" aria-hidden="true">/</span>
      <span class="breadcrumbs__item breadcrumbs__item--current" aria-current="page">{{ collection.title }}</span>

    {%- elsif template contains 'blog' -%}
      <span class="breadcrumbs__separator" aria-hidden="true">/</span>
      {{ blog.title | link_to: blog.url }}

      {%- if current_tags -%}
        <span class="breadcrumbs__separator" aria-hidden="true">/</span>
        <span class="breadcrumbs__item breadcrumbs__item--current" aria-current="page">{{ current_tags | join: ', ' }}</span>
      {%- endif -%}

    {%- elsif template contains 'article' -%}
      <span class="breadcrumbs__separator" aria-hidden="true">/</span>
      {{ blog.title | link_to: blog.url }}
      <span class="breadcrumbs__separator" aria-hidden="true">/</span>
      <span class="breadcrumbs__item breadcrumbs__item--current" aria-current="page">{{ article.title }}</span>

    {%- elsif template contains 'page' -%}
      <span class="breadcrumbs__separator" aria-hidden="true">/</span>
      <span class="breadcrumbs__item breadcrumbs__item--current" aria-current="page">{{ page.title }}</span>

    {%- elsif template contains 'search' -%}
      <span class="breadcrumbs__separator" aria-hidden="true">/</span>
      <span class="breadcrumbs__item breadcrumbs__item--current" aria-current="page">{{ 'general.search.title' | t }}</span>

    {%- endif -%}
  </nav>
{% endunless %}

{% style %}
  .breadcrumbs {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem 0;
    font-size: 0.75rem;
    letter-spacing: var(--btn-letter-spacing, 0.1em);
    text-transform: uppercase;
  }

  .breadcrumbs__link {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    color: var(--color-text-charcoal, #2d312d);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: color 0.2s ease, border-color 0.2s ease;
  }

  .breadcrumbs__link:hover {
    color: var(--color-sage-dark, #8ba888);
    border-bottom-color: var(--color-sage-dark, #8ba888);
  }

  .breadcrumbs__home-icon {
    width: 1em;
    height: 1em;
  }

  .breadcrumbs__separator {
    color: var(--color-sage-dark, #8ba888);
    opacity: 0.5;
  }

  .breadcrumbs__item {
    color: var(--color-text-charcoal, #2d312d);
  }

  .breadcrumbs__item--current {
    opacity: 0.7;
  }

  .breadcrumbs a {
    text-decoration: none;
  }

  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
{% endstyle %}
