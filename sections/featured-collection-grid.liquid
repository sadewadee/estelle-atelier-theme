<section class="py-24 px-12 bg-white">
  <div class="flex justify-between items-center mb-16">
    {%- if section.settings.title != blank -%}
      <h2 class="text-3xl serif font-light text-[var(--text-charcoal)]">{{ section.settings.title }}</h2>
    {%- endif -%}
    <div class="flex gap-4">
      <button class="p-2 border border-sage-accent text-[var(--text-muted)] hover:text-[var(--text-charcoal)] transition-colors"><span class="material-symbols-outlined">chevron_left</span></button>
      <button class="p-2 border border-sage-accent text-[var(--text-muted)] hover:text-[var(--text-charcoal)] transition-colors"><span class="material-symbols-outlined">chevron_right</span></button>
    </div>
  </div>

  <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-{{ section.settings.columns_desktop }} gap-8">
    {%- assign collection = section.settings.collection -%}
    {%- if collection != blank -%}
      {%- for product in collection.products limit: section.settings.products_to_show -%}
        <div class="group cursor-pointer">
          <a href="{{ product.url }}">
            <div class="aspect-[3/4] overflow-hidden bg-sage-pale/40 mb-4 relative">
              {%- if product.compare_at_price > product.price -%}
                <span class="absolute top-4 left-4 text-[8px] uppercase tracking-widest bg-[var(--sage-dark)] text-white px-2 py-1 z-10">Sale</span>
              {%- endif -%}
              {{ product.featured_media | image_url: width: 600 | image_tag:
                loading: 'lazy',
                class: 'w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105'
              }}
            </div>
            <h3 class="text-[10px] uppercase tracking-[0.2em] mb-1 font-medium">{{ product.title }}</h3>
            <p class="text-[10px] text-[var(--text-muted)]">{{ product.price | money }}</p>
          </a>
        </div>
      {%- endfor -%}
    {%- else -%}
      {%- for i in (1..section.settings.products_to_show) -%}
        <div class="group cursor-pointer">
          <div class="aspect-[3/4] overflow-hidden bg-sage-pale/40 mb-4 relative">
            {{ 'product-' | append: i | placeholder_svg_tag: 'w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105' }}
          </div>
          <h3 class="text-[10px] uppercase tracking-[0.2em] mb-1 font-medium">Sample Product {{ i }}</h3>
          <p class="text-[10px] text-[var(--text-muted)]">$99.00</p>
        </div>
      {%- endfor -%}
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Featured Collection Grid",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Popular Picks"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 2,
      "max": 10,
      "step": 1,
      "default": 5,
      "label": "Products to show"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "min": 2,
      "max": 5,
      "step": 1,
      "default": 5,
      "label": "Number of columns on desktop"
    }
  ],
  "presets": [
    {
      "name": "Featured Collection Grid"
    }
  ]
}
{% endschema %}
