{% comment %}
  Estelle Atelier - Featured Collection Grid Section
  Displays products from a collection in a grid layout using card-product snippet
{% endcomment %}

<div class="py-24 px-12 bg-white">
  <div class="max-w-7xl mx-auto">
    {%- if section.settings.title != blank -%}
      <div class="text-center mb-12">
        <h2 class="text-3xl serif font-light text-text-charcoal">{{ section.settings.title }}</h2>
      </div>
    {%- endif -%}

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-{{ section.settings.columns_desktop }} gap-4 md:gap-6">
      {%- assign collection = section.settings.collection -%}
      {%- if collection != blank -%}
        {%- for product in collection.products limit: section.settings.products_to_show -%}
          <div data-animate>
            {%- render 'card-product', card_product: product -%}
          </div>
        {%- endfor -%}
      {%- else -%}
        {%- for i in (1..section.settings.products_to_show) -%}
          <div data-animate>
            {%- render 'card-product', card_product: blank -%}
          </div>
        {%- endfor -%}
      {%- endif -%}
    </div>

    {%- if section.settings.show_view_all and collection != blank -%}
      <div class="text-center mt-12">
        <a href="{{ collection.url }}" class="inline-flex items-center gap-2 px-8 py-4 border border-sage-accent text-text-charcoal hover:bg-sage-dark hover:text-white hover:border-sage-dark transition-all text-xs font-bold uppercase tracking-widest">
          View All Products
          <span class="material-symbols-outlined">arrow_forward</span>
        </a>
      </div>
    {%- endif -%}
  </div>
</div>

{% schema %}
{
  "name": "Featured Collection Grid",
  "tag": "section",
  "class": "section-featured-collection",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Popular Picks"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 8,
      "label": "Products to show"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "min": 2,
      "max": 5,
      "step": 1,
      "default": 4,
      "label": "Desktop columns"
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show 'View all' button",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Featured Collection Grid"
    }
  ]
}
{% endschema %}
