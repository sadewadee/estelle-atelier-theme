<footer class="bg-sage-pale/80 border-t border-sage-accent/50 px-12 md:px-24 py-24">
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 lg:gap-20">
    {%- for block in section.blocks -%}
      <div class="flex flex-col gap-8" {{ block.shopify_attributes }}>
        {%- if block.settings.heading != blank -%}
          <h4 class="text-base serif italic font-semibold text-[var(--text-charcoal)]">{{ block.settings.heading }}</h4>
        {%- endif -%}

        {%- case block.type -%}
          {%- when 'link_list' -%}
            <ul class="flex flex-col gap-4 text-[11px] text-[var(--text-muted)] tracking-wide">
              {%- assign footer_menu = block.settings.menu -%}
              {%- if footer_menu != blank -%}
                {%- for link in footer_menu.links -%}
                  <li><a class="hover:text-[var(--text-charcoal)] transition-colors" href="{{ link.url }}">{{ link.title }}</a></li>
                {%- endfor -%}
              {%- endif -%}
            </ul>

          {%- when 'text' -%}
            <div class="text-[11px] text-[var(--text-muted)] tracking-wide leading-relaxed">
              {{ block.settings.text }}
            </div>

          {%- when 'newsletter' -%}
            <div class="flex flex-col gap-6">
              <p class="text-[11px] text-[var(--text-muted)] tracking-wide">{{ block.settings.subtext }}</p>
              {%- form 'customer', class: 'w-full flex flex-col gap-4 border-b border-sage-accent pb-2 group' -%}
                <input type="hidden" name="contact[tags]" value="newsletter">
                <div class="flex items-center">
                  <input
                    id="NewsletterForm--{{ section.id }}"
                    type="email"
                    name="contact[email]"
                    class="flex-1 bg-transparent border-none focus:ring-0 text-[10px] tracking-[0.3em] uppercase p-0 placeholder:text-gray-300"
                    value="{{ form.email }}"
                    aria-required="true"
                    autocorrect="off"
                    autocapitalize="off"
                    autocomplete="email"
                    {% if form.errors %}
                      autofocus
                      aria-invalid="true"
                      aria-describedby="Newsletter-error--{{ section.id }}"
                    {% elsif form.posted_successfully? %}
                      aria-describedby="Newsletter-success--{{ section.id }}"
                    {% endif %}
                    placeholder="Email Address"
                    required
                  >
                  <button type="submit" class="text-[10px] uppercase tracking-[0.5em] font-medium hover:text-[var(--sage-dark)] transition-colors" name="commit" id="Subscribe">
                    Subscribe
                  </button>
                </div>
                {%- if form.errors -%}
                  <small class="text-red-500 text-[10px]" id="Newsletter-error--{{ section.id }}">{{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}</small>
                {%- endif -%}
              {%- endform -%}
              {%- if form.posted_successfully? -%}
                <h3 class="text-sage-dark text-[10px] uppercase tracking-widest" id="Newsletter-success--{{ section.id }}" tabindex="-1" autofocus>Success</h3>
              {%- endif -%}
            </div>

          {%- when 'social' -%}
            <ul class="flex flex-col gap-4 text-[11px] text-[var(--text-muted)] tracking-wide">
              {%- if settings.social_instagram_link != blank -%}
                <li class="flex items-center gap-2">
                  <a href="{{ settings.social_instagram_link }}" class="flex items-center gap-3 hover:text-[var(--text-charcoal)] transition-colors group">
                    <span class="material-symbols-outlined text-base font-extralight">public</span>
                    <span>Instagram</span>
                  </a>
                </li>
              {%- endif -%}
              {%- if settings.social_pinterest_link != blank -%}
                <li class="flex items-center gap-2">
                  <a href="{{ settings.social_pinterest_link }}" class="flex items-center gap-3 hover:text-[var(--text-charcoal)] transition-colors group">
                    <span class="material-symbols-outlined text-base font-extralight">interests</span>
                    <span>Pinterest</span>
                  </a>
                </li>
              {%- endif -%}
              {%- if settings.social_facebook_link != blank -%}
                 <li class="flex items-center gap-2">
                  <a href="{{ settings.social_facebook_link }}" class="flex items-center gap-3 hover:text-[var(--text-charcoal)] transition-colors group">
                    <span class="material-symbols-outlined text-base font-extralight">facebook</span>
                    <span>Facebook</span>
                  </a>
                </li>
              {%- endif -%}
              <li class="flex items-center gap-2">
                <a href="mailto:{{ shop.email }}" class="flex items-center gap-3 hover:text-[var(--text-charcoal)] transition-colors group">
                  <span class="material-symbols-outlined text-base font-extralight">mail</span>
                  <span>Contact Us</span>
                </a>
              </li>
            </ul>
        {%- endcase -%}
      </div>
    {%- endfor -%}
  </div>

  <div class="mt-24 pt-12 border-t border-sage-accent/40 flex flex-col md:flex-row justify-between items-center gap-8">
    <div class="flex flex-col items-center md:items-start">
      <h5 class="text-xl tracking-[0.2em] serif font-light text-[var(--text-charcoal)]">{{ shop.name | uppercase }}</h5>
      <p class="text-[8px] text-[var(--text-muted)] uppercase tracking-[0.5em] mt-2">Â© {{ 'now' | date: "%Y" }} {{ shop.name | uppercase }}. PRESERVING TRADITION IN SAGE.</p>
    </div>
    <div class="flex gap-10 items-center opacity-40 grayscale hover:opacity-100 transition-all duration-700">
      {%- for type in shop.enabled_payment_types -%}
        {{ type | payment_type_svg_tag: class: 'h-4' }}
      {%- endfor -%}
    </div>
  </div>
</footer>

{% schema %}
{
  "name": "Footer",
  "max_blocks": 4,
  "blocks": [
    {
      "type": "link_list",
      "name": "Menu",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Quick Links"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menu",
          "default": "footer"
        }
      ]
    },
    {
      "type": "text",
      "name": "About",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "About Estelle"
        },
        {
          "type": "inline_richtext",
          "id": "text",
          "label": "Text",
          "default": "Our atelier is dedicated to preserving traditional craftsmanship while embracing modern sustainability."
        }
      ]
    },
    {
      "type": "newsletter",
      "name": "Newsletter",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Join the Atelier"
        },
        {
          "type": "text",
          "id": "subtext",
          "label": "Subtext",
          "default": "Subscribers receive priority access to seasonal drops."
        }
      ]
    },
    {
      "type": "social",
      "name": "Social",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Connect"
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "link_list"
      },
      {
        "type": "link_list"
      },
      {
        "type": "text"
      },
      {
        "type": "social"
      }
    ]
  }
}
{% endschema %}
